<!DOCTYPE html>
<head>
   
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
   

   

      

   <title>Real Time Chat App</title>


      <meta name="description" content="Use technologies like Node.js, Socket.io, and Express to create your own form of communication!">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta property="og:title" content="Real Time Chat App">
      <meta property="og:description" content="Use technologies like Node.js, Socket.io, and Express to create your own form of communication!">
      <meta property="og:url" content="https://enlight.ml/nodejs-chat">
      <meta property="og:image" content="https://enlight.ml/enlight-logo.png" /> 
      <meta name="twitter:card" content="summary" />
      <meta name="twitter:site" content="@tryenlight" />
      <meta name="twitter:title" content="Real Time Chat App" />
      <meta name="twitter:description" content="Use technologies like Node.js, Socket.io, and Express to create your own form of communication!" />
      <meta name="twitter:image" content="https://enlight.ml/enlight-logo.png" />

      <link href="style.css" type="stylesheet">

      <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/tachyons/4.7.0/tachyons.min.css" />
      <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" />
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.css" />

      <script>
         (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
         (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
         m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
         
         ga('create', 'UA-85620206-1', 'auto');
         ga('send', 'pageview');
      </script>
</head>
<header>
   <header class="black-80 tc avenir">
  <h1 class="mt2 mb0 baskerville fw1 f-headline"><a href="/" class="link black-80 hover-bg-pink dib">Enlight</a></h1>
  <h2 class="mt2 mb0 f6 fw4 ttu tracked">Learn to code by building projects</h2>
  <nav class="bt bb tc mw7 center mt4">
    <a class="f5 f4-l link bg-animate black-80 hover-bg-lightest-blue dib pa3 ph4-l" href="/">Projects</a>
    <a class="f5 f4-l link bg-animate black-80 hover-bg-light-green dib pa3 ph4-l" href="/web">JavaScript</a>
    <a class="f5 f4-l link bg-animate black-80 hover-bg-light-blue dib pa3 ph4-l" href="/python">Python</a>
    <a class="f5 f4-l link bg-animate black-80 hover-bg-light-pink dib pa3 ph4-l" href="https://github.com/samayshamdasani/enlight#contribute-by-adding-your-projects--tutorials">Contribute</a>
    <a class="f5 f4-l link bg-animate black-80 hover-bg-light-yellow dib pa3 ph4-l" href="/why">About</a>
  </nav>
</header>
<script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=enlightml" id="_carbonads_js"></script>
<style>
#carbonads {
  display: block;
  overflow: hidden;
  position: absolute;
  top: 10px;
  left: 0;
  padding: 1em;
  font-family: "Avenir Next", Helvetica, sans-serif;
  line-height: 1;
  max-width: 150px;
}

  #carbonads span {
    display: block;
    overflow: hidden;
  }

  .carbon-img {
    display: block;
    margin: 0 auto 1em;
    text-align: center;
  }

  .carbon-text {
    display: block;
    margin-bottom: 1em;
    text-align: left;
    max-width: 200px;
  }

  #carbonads a {
    text-decoration: none;
    color: #333;
  }

  #carbonads a:hover {
    opacity: .8;
  }

  .carbon-poweredby {
    display: block;
    text-align: right;
    font-size: .8em;
  }

  @media only screen and (min-width: 320px) and (max-width: 1279px) {
  #carbonads {
    position: relative;
    margin: 6em auto 2em;
    top: 0px;
  }
  #carbonads img {
    padding: 0;
  }

}

</style> 
<body>
   
<div class="vh-100 dt w-100 tc bg-red white cover athelas" id="post">
    <div class="dtc v-mid">
      <h1 class="f1 f-headline-l fw2 b near-black-60 ph0 ph6-ns">Build a <span class="underline">Real Time Chat App</span></h1>
      <blockquote class="ph0 mh0 measure f4 lh-copy center">
        <p class="fw3 near-black-70 avenir">
          Use technologies like Node.js, Socket.io, and Express to create your own form of communication!
        </p>
        <a href="https://github.com/samayshamdasani/enlight/tree/gh-pages/demo/node-js/chat" class="f4 link dim ba ph3 pv2 mb2 dib white sans-serif">Source</a>
        <a href="https://enlight-chat-nodejs.herokuapp.com/" class="f4 link dim ba ph3 pv2 mb2 dib white sans-serif">Demo</a>
         <a href="https://enlight-chat-nodejs.herokuapp.com/"><img class="project-image" src="/img/nodejs-chat.gif"></a>

      </blockquote>
    </div>
  </div>




      <div class="cf w-50-ns w-90 center athelas f4 content">
         <h3 id="getting-started">Getting started</h3>

<p>Building a chat app is pretty complex. However, with a framework like Node.js, and libraries like Socket.io and Express, a basic chat app is achievable with just a couple lines of code. Using Node.js, we can write JavaScript for the server, and with Socket.io and Express, we can make use of websockets to push messages to users from the server in real-time.</p>

<p>We’re going to be creating a <a href="https://nodejs.org/en/">Node.js</a> app, so make sure you have it installed.</p>

<p>To start:</p>
<ul>
  <li>create a folder</li>
  <li>cd into that directory in your terminal (command line)</li>
  <li>run <code class="highlighter-rouge">npm init</code> . The will create a new <code class="highlighter-rouge">package.json</code> file. (it will ask you name/version, etc.)</li>
  <li>install our dependencies by running:
    <ul>
      <li><code class="highlighter-rouge">npm install --save express</code> // a web framework for node</li>
      <li><code class="highlighter-rouge">npm install --save socket.io</code> // real-time module for our app</li>
    </ul>
  </li>
</ul>

<h3 id="file-structure">File structure</h3>

<p>Now that our dependencies are installed, let’s create our file structure:</p>
<ul>
  <li>add a <code class="highlighter-rouge">server.js</code> file</li>
  <li>create a folder named <code class="highlighter-rouge">public</code> with the following files:
    <ul>
      <li><code class="highlighter-rouge">index.html</code></li>
      <li><code class="highlighter-rouge">style.css</code></li>
      <li><code class="highlighter-rouge">client.js</code></li>
    </ul>
  </li>
</ul>

<h3 id="setting-up-the-server">Setting up the server</h3>

<p>Open up the <code class="highlighter-rouge">server.js</code> file. Here’s where we need to require <a href="http://expressjs.com/">express</a> and <a href="http://socket.io/">socket.io</a>, and create a new server. We also need to use <a href="http://expressjs.com/en/4x/api.html#app.get">app.get</a> to deliver an HTML file easily. In addition, we have to let express know that all our static (html,css,js) files are in the public folder. Lastly, we need to open up a port on our <code class="highlighter-rouge">localhost</code> hostname.</p>

<pre class="prettyprint">
  var express = require('express');
  var app = express();
  var server = require('http').createServer(app);
  var io = require('socket.io')(server);

  app.get('/', function(req, res, next) {
  	res.sendFile(__dirname + '/public/index.html')
  });

  app.use(express.static('public'));

  server.listen(7777);

</pre>

<p>Now, open your <code class="highlighter-rouge">index.html</code> file in the public folder. In there, we’ll need to create a normal HTML document with the following:</p>
<ul>
  <li>link our CSS file</li>
  <li>create a <code class="highlighter-rouge">form</code> with two inputs
    <ul>
      <li>one for the message (with an id), other for the submit button</li>
    </ul>
  </li>
  <li>create a <code class="highlighter-rouge">ul</code> with an id for the messages to go in</li>
  <li>link JQuery for our client side JavaScript</li>
  <li>link <code class="highlighter-rouge">/socket.io/socket.io.js</code></li>
  <li>link <code class="highlighter-rouge">client.js</code></li>
</ul>

<pre class="prettyprint"><xmp>
 <html>  
    <head>
      <title> Real Time Chat </title>
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <h1> Chat! </h1>
        <form>
            <input id="message" type="text" placeholder="message" />
            <input type="submit" value="Send" />
        </form>

        <ul id="thread"></ul>

        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

        <script src="/socket.io/socket.io.js"></script>

        <script src="client.js"></script>  
    </body>
 </html>  
</xmp></pre>

<p>Now, if you <code class="highlighter-rouge">cd</code> into the file on your terminal, run <code class="highlighter-rouge">node server.js</code>, and headover to <code class="highlighter-rouge">localhost:7777</code> in your browser, you should see your HTML file being served.</p>

<h3 id="interacting-with-the-server">Interacting with the server</h3>

<p>Open up your <code class="highlighter-rouge">client.js</code> file. At this point, we need to connect to our server using <a href="http://socket.io/docs/">io.connect</a>.
On connect, let’s emit a message to confirm our connection with an event of <code class="highlighter-rouge">join</code>.</p>

<pre class="prettyprint">
  var socket = io.connect('http://localhost:7777');
  socket.on('connect', function(data) {
      socket.emit('join', 'Hello server from client');
  });
</pre>

<p>Then, we can open back up our <code class="highlighter-rouge">server.js</code> file and log a message that the client is connected. Also, we can listen for the <code class="highlighter-rouge">join</code> event we wrote earlier to log the data from the client. Here’s how it’ll work:</p>

<pre class="prettyprint">
  var express = require('express');
  var app = express();
  var server = require('http').createServer(app);
  var io = require('socket.io')(server);

  app.get('/', function(req, res, next) {
  	res.sendFile(__dirname + '/public/index.html')
  });

  app.use(express.static('public'));


  io.on('connection', function(client) {
  	console.log('Client connected...');

  	client.on('join', function(data) {
  		console.log(data);
  	});
  });

  server.listen(7777);
</pre>

<p>Now, if you re-run the server.js file in your terminal (CTRL+C to exit) and refresh <code class="highlighter-rouge">localhost:7777</code> in your browser, you should see the messages <code class="highlighter-rouge">client connected...</code> &amp; <code class="highlighter-rouge">Hello server from client</code> in your terminal which confirms our connection!</p>

<h3 id="making-the-chat-app-work">Making the chat app work</h3>

<p>Finally! Now that we have a connection, we can use it to emit and send messages. Here’s what we need to do in our 	<code class="highlighter-rouge">client.js</code> file:</p>
<ul>
  <li>listen for an event (<code class="highlighter-rouge">thread</code>) that will recieve any messages emitted by ther server</li>
  <li>use the JQuery .submit() function to
    <ul>
      <li>emit the message from our <code class="highlighter-rouge">message</code> id (in our input)</li>
      <li>reset the form</li>
      <li>use <code class="highlighter-rouge">return false;</code> to prevent the from from it’s default action (refreshing page)</li>
    </ul>
  </li>
</ul>

<pre class="prettyprint">
  // initializing socket, connection to server
  var socket = io.connect('http://localhost:7777');
  socket.on('connect', function(data) {
      socket.emit('join', 'Hello server from client');
  });


  // listener for 'thread' event, which updates messages
  <xmp>socket.on('thread', function(data) {
    $('#thread').append('<li>' + data + '</li>');
  });</xmp>

  // sends message to server, resets &amp; prevents default form action
  $('form').submit(function() {
  	var message = $('#message').val();
  	socket.emit('messages', message);
  	this.reset();
  	return false;
  }); 
</pre>

<p>However, before we have a functional application, we have to add our <code class="highlighter-rouge">messages</code> event to our server and emit it to our thread event!</p>

<pre class="prettyprint">
  var express = require('express');
  var app = express();
  var server = require('http').createServer(app);
  var io = require('socket.io')(server);

  app.get('/', function(req, res, next) {
  	res.sendFile(__dirname + '/public/index.html')
  });

  app.use(express.static('public'));


  io.on('connection', function(client) {
  	console.log('Client connected...');

  	client.on('join', function(data) {
  		console.log(data);
  	});

  	client.on('messages', function(data){
  		client.emit('thread', data);
  		client.broadcast.emit('thread', data);
  	});
  });

  server.listen(7777);
</pre>

<p>There you go! Our <code class="highlighter-rouge">messages</code> event is listened for and once to server recieves it it is broadcasted to all the other clients using <code class="highlighter-rouge">client.broadcast.emit</code>.</p>

<h3 id="styling-the-app">Styling the app</h3>

<p>Before we finish, let’s style the app a bit. Open up the <code class="highlighter-rouge">style.css</code> file and customize it to your liking!</p>

<pre class="prettyprint">
  html, body {
    text-align: center;
    font-family: 'Avenir Next', 'Helvetica', 'Arial', sans-serif;
  }

  html,body,li,form,ul {
    padding: 0;
    margin: 0;
  }

  form {
    padding-bottom: 2%;
  }

  li {
    list-style: none;
    width: 100vw;
  }

  li:nth-child(odd) { 
    background: #eee; 
  }

</pre>

<p>Well, now you have a basic form of communication! If you open up multiple tabs, you’ll see the messages are being sent in real-time! Have fun :)</p>


      <div id="disqus_thread"></div>
      <script>
         /**
         *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
         *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
         /*
         var disqus_config = function () {
         this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
         this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
         };
         */
         (function() { // DON'T EDIT BELOW THIS LINE
         var d = document, s = d.createElement('script');
         s.src = '//enlight-2.disqus.com/embed.js';
         s.setAttribute('data-timestamp', +new Date());
         (d.head || d.body).appendChild(s);
         })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      <br><br>

      </div>

   <footer>
      <form method="post" action="//enlight.us11.list-manage.com/subscribe/post?u=c28720fd0200ee7eef0e3e9ec&amp;id=1905fa696f" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="measure center ma3">
         <h3 class="mt2 mb0 f5 fw4 ttu tracked black-80"> Join <b class="f5">701</b> other developers who get the latest projects sent directly to their inbox! </h3><br>
         <input class="tc pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100 mw5 f6" id="email" type="email" name="EMAIL" placeholder="Email">
         <button type="submit" name="action" class="b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib hover-white hover-bg-black">Subscribe!</button>
      </form>

      <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false" data-size="large">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

      <a href="https://twitter.com/tryenlight" class="twitter-follow-button" data-size="large" data-show-count="false">Follow @tryenlight</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
 </footer>

<!--  FIX FOOTER, ADD TWEET BUTTON, & FOLLOW -->
   <style>
    /* General */
    
    body {
        margin-top: 100px;
        background-color: #F4F4F4;
        color: #333;

    }
    #nprogress .bar {
        background: #031927;
    }
   .card {
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
        transition: all 0.3s ease;
   }
    .card:hover {
        box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
    }

    .content {
        line-height: 1.6;
    }
    .content a {
        border-bottom: 2px solid #333;
        text-decoration: none;
        color: #333;
    }

    .content a:hover {
        border-bottom: none;
    }

    code {
        background: #f2ebc6;
    }

    *::-moz-selection { background: #ff80cc; }
    *::selection { background: #ff80cc; }
    
    
   
    /* If post.layout === editor */
    
    @media(min-width: 960px) {


        .project-editor {
            display: flex;
            overflow: auto;
            height: 100vh;
            margin-top: -100px;
            padding-top: 100px;
            position: relative;
            width: 100%;
            backface-visibility: hidden;
            will-change: overflow;
        }

    

        .code-content, .editor {
            overflow: auto;
            height: auto;
            padding: .5rem;
            -webkit-overflow-scrolling: touch;
            -ms-overflow-style: none;
        }

        .code-content {
            flex: 1;
        }

        .editor {
            flex: 1;
             
        }

        textarea {
          width: 95%;
          float: top;
          min-height: 150px;
          overflow: scroll;
          display: inline-block;
          outline: none;
          font-family: Courier, sans-serif;
          font-size: 14px;
          margin-left: auto;
          margin-right: auto;
        }

        iframe {
          width: 95%;
          height: 25em;
        }

        .editor .project-button {
            margin-left: auto;
            display: flex;
        }

            /* If exited editor */
        .content-exit {
            max-width: 60%;
            margin: 0 auto;
        }

        /* If embeded editor */

        .embedded-compiler {
            width: 48%;
        }

    }



    @media(max-width: 900px) {
        .card {
            width: 100%;
        }
        #header .navbar.navbar-fixed-top.navbar-color-on-scroll.navbar-transparent {
            background: #031927;
            color: #fff;
        }
    
        .grid {
            max-width: 90%;
        }
        .project-header, .content {
            max-width: 95%;
            margin: 0 auto;
        }
        .editor {
            visibility: hidden;
        }
    }
    footer {
        width: 100%;
        margin-bottom: 5%;
        margin-top: 5%;
        text-align: center;
    }
   
    .fa-twitter:hover {
        color: #1dcaff;
    }
    .fa-github:hover {
        color: #6e5494;
    }
    .fa-envelope:hover {
        color: #bd2c00;
    }
    /*! Color themes for Google Code Prettify | MIT License | github.com/jmblog/color-themes-for-google-code-prettify */
    
    pre {
        overflow: auto;
    }
    .prettyprint {
        background: #031927;
        font-family: Menlo, "Bitstream Vera Sans Mono", "DejaVu Sans Mono", Monaco, Consolas, monospace;
        border: 0 !important;
        border-radius: 0;
        width: 100% !important;
        margin-top: 3%;
        margin-bottom: 3%;
        
    }
    .pln {
        color: #e6e9ed;
    }
    /* Specify class=linenums on a pre to get line numbering */
    
    ol.linenums {
        margin-top: 0;
        margin-bottom: 0;
        color: #656d78;
    }
    li.L0,
    li.L1,
    li.L2,
    li.L3,
    li.L4,
    li.L5,
    li.L6,
    li.L7,
    li.L8,
    li.L9 {
        padding-left: 1em;
        background-color: #2f3640;
        list-style-type: decimal;
    }
    @media screen {
        /* string content */
        
        .str {
            color: #ffce54;
        }
        /* keyword */
        
        .kwd {
            color: #4fc1e9;
        }
        /* comment */
        
        .com {
            color: #656d78;
        }
        /* type name */
        
        .typ {
            color: #4fc1e9;
        }
        /* literal value */
        
        .lit {
            color: #ac92ec;
        }
        /* punctuation */
        
        .pun {
            color: #e6e9ed;
        }
        /* lisp open bracket */
        
        .opn {
            color: #e6e9ed;
        }
        /* lisp close bracket */
        
        .clo {
            color: #e6e9ed;
        }
        /* markup tag name */
        
        .tag {
            color: #ed5565;
        }
        /* markup attribute name */
        
        .atn {
            color: #a0d468;
        }
        /* markup attribute value */
        
        .atv {
            color: #ffce54;
        }
        /* declaration */
        
        .dec {
            color: #ac92ec;
        }
        /* variable name */
        
        .var {
            color: #e6e9ed;
        }
        /* function name */
        
        .fun {
            color: #e6e9ed;
        }
    }
</style>

   <script src="/js/editor.js"></script>
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.js"></script>
<script type="text/javascript"> 
   NProgress.configure({ 
   	showSpinner: true
    });
   NProgress.start();   
   NProgress.done();
</script>

</body>
</html>